(function(e){function t(t){for(var n,i,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"0922":function(e,t,r){},"1e82":function(e,t,r){},2274:function(e,t,r){"use strict";var n=r("0922"),a=r.n(n);a.a},"27a9":function(e,t,r){"use strict";var n=r("b388"),a=r.n(n);a.a},2845:function(e,t,r){"use strict";var n=r("d0f6"),a=r.n(n);a.a},3108:function(e,t,r){"use strict";var n=r("4385"),a=r.n(n);a.a},"382f":function(e,t,r){"use strict";var n=r("a93a"),a=r.n(n);a.a},"40d2":function(e,t,r){"use strict";var n=r("cb56"),a=r.n(n);a.a},"41bf":function(e,t,r){e.exports=r.p+"img/btn_google_signin_dark_normal_web.56f00e35.png"},4385:function(e,t,r){},"4fe6":function(e,t,r){"use strict";var n=r("d753"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Header",{attrs:{msg:e.welcomeMessage,accessToken:e.accessToken}}),r("router-view",{key:e.$route.fullPath,attrs:{msg:e.welcomeMessage,accessToken:e.accessToken}})],1)},o=[],i=(r("d3b7"),r("96cf"),r("1da1")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"nav"},[n("div",{staticClass:"nav-header"},[n("img",{attrs:{src:r("cf05")}}),e._v(" "),n("h2",[n("router-link",{attrs:{to:"/"}},[e._v(e._s(e.msg))])],1)]),n("ul",{staticClass:"nav-body"},[n("li",[n("router-link",{attrs:{to:"/"}},[e._v("소문 목록")])],1),n("li",[n("router-link",{attrs:{to:"/v/simple-list"}},[e._v("아이돌 리스트")])],1),e.getLoggedIn?n("li",[n("router-link",{attrs:{to:"/v/write-uwasa"}},[e._v("소문 등록")])],1):e._e(),n("li",[n("router-link",{attrs:{to:"/v/thread/qna"}},[e._v("잡답/질문게시판")])],1),e._m(0)]),e._m(1),n("LoginPanel",{attrs:{accessToken:e.accessToken}})],1)},c=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",[r("a",{attrs:{href:"https://github.com/ayaysir/deretopic",target:"_blank"}},[e._v("About")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"notification"},[e._v(" 2020년 12월 14일 이후 올라오는 소문들은. "),r("br"),r("a",{attrs:{href:"http://yoonbumtae.com/dere"}},[e._v("http://yoonbumtae.com/dere")]),r("br"),e._v("위의 링크에서 업데이트됩니다. ")])}],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoggedIn,expression:"!isLoggedIn"}]},[n("a",{attrs:{href:e.getRedirectUrl}},[n("img",{staticClass:"img-google",attrs:{src:r("41bf")}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoggedIn,expression:"isLoggedIn"}],staticClass:"profile-wrapper"},[n("p",[e.getUserData?n("img",{staticClass:"profile-img",attrs:{src:e.getUserData.imageUrl}}):e._e(),e.getUserData?n("span",[e._v(e._s(e.getUserData.name))]):e._e(),e._v(" "),n("span",[e._v("님, 로그인되었습니다.")]),e._v(" "),n("button",{on:{click:e.logout}},[e._v("로그아웃")])])])])},u=[],d=(r("c975"),r("ac1f"),r("5319"),r("1276"),{created:function(){},props:["accessToken"],computed:{isLoggedIn:function(){return this.$store.state.accessUser&&""!=this.$store.state.accessUser.token},getUserData:function(){return this.$store.state.accessUser&&this.$store.state.accessUser.data},getRedirectUrl:function(){var e=window.location.href,t=-1!=e.indexOf("http://"),r=e.replace(/http:\/\/|https:\/\//,"").split("/")[0],n=(t?"http://":"https://")+r;return n+"/oauth2/authorize/google?redirect_uri="+n+"/v/auth-redirect"}},methods:{logout:function(){localStorage.removeItem("accessToken"),this.$store.dispatch("LOGOUT")}},data:function(){return{}}}),p=d,h=(r("40d2"),r("2877")),m=Object(h["a"])(p,l,u,!1,null,"0b232ef2",null),f=m.exports,v={name:"Header",props:["msg","logoSrc","accessToken"],components:{LoginPanel:f},computed:{getLoggedIn:function(){return this.$store.state.accessUser&&""!=this.$store.state.accessUser.token}}},g=v,_=(r("3108"),Object(h["a"])(g,s,c,!1,null,"2b24fd16",null)),w=_.exports,b={name:"App",data:function(){return{welcomeMessage:"default msg",topicDataFromSuper:[],accessToken:localStorage.getItem("accessToken")}},components:{Header:w},created:function(){var e=this;function t(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/test/title",{method:"get"});case 2:return t=e.sent,e.abrupt("return",t.text());case 4:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}t().then((function(t){e.welcomeMessage=t,document.title=t}));var n=localStorage.getItem("accessToken");n&&""!=n&&this.$store.dispatch("LOGIN",n).then((function(){}))}},y=b,x=(r("034f"),Object(h["a"])(y,a,o,!1,null,null,null)),I=x.exports,k=r("8c4f"),C=r("58ca"),O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"topic"},[r("audio",{attrs:{id:"tts-audio-main"}}),r("TopicSearch",{on:{search:e.doSearch,allOrder:e.doAllOrder,shuffle:e.doShuffle}}),e._l(e.lineCarriagedTopicData,(function(t,n){return r("div",{key:n,staticClass:"each-row"},[r("ProfilePuchi",{attrs:{idol:t.idol}}),r("div",{staticClass:"topic-num"},[r("span",[e._v(e._s(t.topicNum))])]),r("div",{staticClass:"topic-content"},[r("p",{staticClass:"label-lang"},[e._v("Ja")]),r("p",{staticClass:"topic-ja"},[r("span",{domProps:{innerHTML:e._s(t.uwasaJa)}}),r("a",{staticClass:"btn-speech",attrs:{"data-id":t.id,"data-name":t.idolNameJa,"data-num":t.topicNum},on:{click:function(t){return e.playTTS(t)}}},[e._v("🔊")])]),r("p",{staticClass:"label-lang"},[e._v("Ko")]),r("p",{staticClass:"topic-ko"},[r("span",{domProps:{innerHTML:e._s(t.uwasaKo)}})])])],1)})),r("infinite-loading",{attrs:{identifier:e.infiniteId,spinner:"waveDots"},on:{infinite:e.infiniteHandler}},[r("div",{staticStyle:{color:"rgb(102, 102, 102)","font-size":"14px",padding:"10px 0px"},attrs:{slot:"no-more"},slot:"no-more"},[e._v("목록의 끝입니다 :)")])])],2)},$=[],P=(r("99af"),r("d81d"),r("4d63"),r("25f0"),r("e166")),U=r.n(P),T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-box"},[r("div",{staticClass:"form-group order"},[r("label",[e._v("전체 정렬")]),r("button",{on:{click:e.allOrder}},[e._v(e._s(1==e.isOrderAsc?"오름차순 ▲":"내림차순 ▼"))]),r("button",{on:{click:e.shuffleOrder}},[e._v("순서 섞기")])]),r("div",{staticClass:"form-group search"},[r("label",[e._v("소문 검색")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.searchCategory,expression:"searchCategory"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.searchCategory=t.target.multiple?r:r[0]}}},[r("option",{attrs:{selected:"",value:"내용"}},[e._v("소문 내용")]),r("option",{attrs:{value:"이름"}},[e._v("아이돌 이름")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],attrs:{type:"text"},domProps:{value:e.searchKeyword},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)},input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}),r("button",{on:{click:e.search}},[e._v("검색")]),r("button",{on:{click:e.searchReset}},[e._v("초기화")])])])},S=[],N={data:function(){return{searchCategory:"내용",searchKeyword:"",isOrderAsc:!0}},methods:{search:function(){this.$emit("search",this.searchCategory,this.searchKeyword)},searchReset:function(){this.$emit("search",this.searchCategory,"")},allOrder:function(){this.isOrderAsc=!this.isOrderAsc,this.$emit("allOrder",1==this.isOrderAsc?"asc":"desc")},shuffleOrder:function(){this.$emit("shuffle")}}},j=N,R=(r("77b3"),Object(h["a"])(j,T,S,!1,null,"4bd81d0d",null)),L=R.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"idol-name"},[r("img",{ref:"puchiImg",staticClass:"puchi",attrs:{src:e.getPuchiImage},on:{error:e.changeDefaultImage}}),r("p",[e._v(e._s(e.idol.nameKo)),r("br"),e._v("("+e._s(e.idol.name)+") "),r("br"),r("span",{staticClass:"link-small"},[r("router-link",{attrs:{to:"/v/idol/view/"+e.idol.id}},[e._v("[프로필]")]),e._v(" "),r("a",{staticClass:"idol-link",attrs:{href:"/api/idol/redirect/"+e.idol.name,target:"_blank"}},[e._v("[나무위키]")])],1)])])},D=[],E={name:"ProfilePuchi",props:["idol","customImage"],data:function(){return{defaultImgUrl:"https://dummyimage.com/128x172/ff7db5/fff.png&text=puchi",currentUrl:"/api/idol/puchi/"+this.idol.id}},methods:{changeDefaultImage:function(){this.currentUrl=this.defaultImgUrl},setPuchiImage:function(e){this.currentUrl=e}},computed:{getPuchiImage:{get:function(){return this.currentUrl},set:function(e){this.currentUrl=e}}},watch:{customImage:function(e){var t=this,r=new FileReader;r.onload=function(){t.getPuchiImage=r.result},r.readAsDataURL(e)},idol:function(e){this.currentUrl="/api/idol/puchi/"+e.id}}},A=E,z=(r("6fff"),Object(h["a"])(A,K,D,!1,null,"619fae9c",null)),B=z.exports,J={name:"Topic",data:function(){return{topicData:[],limit:0,fetchUrl:"/api/idol/uwasa/pages/{limit}",searchKeyword:"",infiniteId:+new Date}},created:function(){},mounted:function(){console.log(this.$route.query.uwasaKeyword,this.$route.query.idolKeyword);var e=this.$route.query.uwasaKeyword,t=this.$route.query.idolKeyword;this.$route.query.uwasaKeyword?this.doSearch("내용",e):this.$route.query.idolKeyword&&this.doSearch("이름",t)},components:{InfiniteLoading:U.a,TopicSearch:L,ProfilePuchi:B},computed:{lineCarriagedTopicData:function(){var e=JSON.parse(JSON.stringify(this.topicData)),t=this.searchKeyword,r=new RegExp(t,"ig");return console.log("현재 검색어  ",t),e.map((function(e){return e.uwasaJa=e.uwasaJa.replace(/(?:\\r\\n|\\r|\\n|\r\n|\r|\n)/g,"<br>"),e.uwasaKo=e.uwasaKo.replace(/(?:\\r\\n|\\r|\\n|\r\n|\r|\n)/g,"<br>"),t&&""!=t&&(e.uwasaJa=e.uwasaJa.replace(r,"<span class='search-highlight'>"+t+"</span>"),e.uwasaKo=e.uwasaKo.replace(r,"<span class='search-highlight'>"+t+"</span>")),e}))}},methods:{showAlert:function(){alert("코드수 늘리기")},getTopicFromApi:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,{method:"GET"});case 3:return r=t.sent,t.next=6,r.json();case 6:return n=t.sent,t.abrupt("return",n);case 10:t.prev=10,t.t0=t["catch"](0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},speak:function(e,t){if("undefined"!==typeof SpeechSynthesisUtterance&&"undefined"!==typeof window.speechSynthesis){window.speechSynthesis.cancel();var r=t||{},n=new SpeechSynthesisUtterance;n.rate=r.rate||1,n.pitch=r.pitch||1,n.lang=r.lang||"ko-KR",n.text=e,window.speechSynthesis.speak(n)}else alert("이 브라우저는 음성 합성을 지원하지 않습니다.")},playTTS:function(e){var t=e.currentTarget||e.target,r=t.dataset.id;console.log(t,t.dataset);var n=document.getElementById("tts-audio-main");n.src="/api/idol/tts/"+r,n.play()},resetSearch:function(e){this.limit=0,this.fetchUrl="/api/idol/uwasa/pages/{limit}"+(e?"?reverseAll=true":""),this.topicData=[],this.infiniteId+=1,this.searchKeyword="",history.pushState(null,"","/")},doSearch:function(e,t){if(console.log(e,t),t&&""!=t){this.limit=0,this.searchKeyword=t,this.topicData=[];var r="내용"==e?"uwasaKeyword":"이름"==e?"idolKeyword":"";this.fetchUrl="/api/idol/uwasa/pages/{limit}?".concat(r,"=").concat(t),this.infiniteId+=1,history.pushState(null,"","/v/search?".concat(r,"=").concat(t))}else this.resetSearch()},doAllOrder:function(e){this.resetSearch("desc"==e)},doShuffle:function(){this.limit=0,this.fetchUrl="/api/idol/uwasa/pages/{limit}?shuffle=true",this.topicData=[],this.infiniteId+=1,this.searchKeyword=""},infiniteHandler:function(e){var t=this,r=30,n=this.fetchUrl.replace("{limit}",this.limit);this.getTopicFromApi(n).then((function(n){setTimeout((function(){n.length?(t.topicData=t.topicData.concat(n),e.loaded(),t.limit+=1,console.log("after",t.topicData.length,t.limit),n.length/r<1&&e.complete()):e.complete()}),1e3)})).catch((function(e){console.error(e)}))}}},H=J,F=(r("27a9"),Object(h["a"])(H,O,$,!1,null,"6a788999",null)),q=F.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hello"},[r("h1",[e._v(e._s(e.msg))])])},G=[],W={name:"HelloWorld",props:["msg"]},V=W,Z=(r("2274"),Object(h["a"])(V,M,G,!1,null,"2725e315",null)),Q=Z.exports,X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[0!=e.idols.length?r("table",{staticClass:"idol-list"},[e._m(0),r("tbody",e._l(e.idols,(function(t){return r("tr",{key:t.name},[r("td",[r("ProfileIcon",{attrs:{idol:t}})],1),r("td",[e._v(e._s(t.name))]),r("td",[e._v(e._s(t.nameKo))]),r("td",[r("router-link",{attrs:{to:"/v/idol/view/"+t.id}},[e._v("[보기]")])],1),r("td",[e.getLoggedIn?r("router-link",{staticClass:"danger",attrs:{to:"/v/idol/update/"+t.id}},[e._v("[편집]")]):e._e()],1)])})),0)]):e._e(),r("infinite-loading",{attrs:{spinner:"waveDots"},on:{infinite:e.infiniteHandler}})],1)},Y=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("th",[e._v("No.")]),r("th",[e._v("이름")]),r("th",[e._v("이름 (한글)")])])}],ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"idol-icon-div"},[r("img",{staticClass:"idol-icon",attrs:{src:e.getIconImage},on:{error:e.changeDefaultImage}})])},te=[],re={name:"ProfileIcon",props:["idol","customImage"],data:function(){return{defaultImgUrl:"https://dummyimage.com/90x90/ff7db5/fff.png&text=icon",currentUrl:"/api/idol/icon/"+this.idol.id}},methods:{changeDefaultImage:function(){this.currentUrl=this.defaultImgUrl},setIconImage:function(e){this.currentUrl=e}},computed:{getIconImage:{get:function(){return this.currentUrl},set:function(e){this.currentUrl=e}}},watch:{customImage:function(e){var t=this,r=new FileReader;r.onload=function(){t.getIconImage=r.result},r.readAsDataURL(e)},idol:function(e){this.currentUrl="/api/idol/icon/"+e.id}}},ne=re,ae=(r("abdd"),Object(h["a"])(ne,ee,te,!1,null,"5e105c12",null)),oe=ae.exports,ie={data:function(){return{idols:[],requestCount:0}},created:function(){},components:{InfiniteLoading:U.a,ProfileIcon:oe},computed:{getLoggedIn:function(){return this.$store.state.accessUser&&""!=this.$store.state.accessUser.token}},methods:{getIdol:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/idol/simple");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))()},infiniteHandler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!=t.requestCount){r.next=5;break}e.loaded(),t.requestCount+=1,r.next=9;break;case 5:return r.next=7,t.getIdol();case 7:n=r.sent,setTimeout((function(){n.length&&(t.idols=n),e.complete()}),500);case 9:case"end":return r.stop()}}),r)})))()}}},se=ie,ce=Object(h["a"])(se,X,Y,!1,null,"c9e45f44",null),le=ce.exports,ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("fieldset",[r("legend",[e._v(" 정보 입력 ")]),r("div",{staticClass:"form-group"},[r("label",[e._v("아이돌 선택: ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedIdol,expression:"selectedIdol"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedIdol=t.target.multiple?r:r[0]}}},e._l(e.idols,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.nameKo+" ("+t.name+")"))])})),0)]),r("div",{staticClass:"form-group"},[r("label",[e._v("일본어 원문 입력: ")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.textJa,expression:"textJa"}],domProps:{value:e.textJa},on:{input:function(t){t.target.composing||(e.textJa=t.target.value)}}})]),r("div",[r("button",{on:{click:e.translate}},[e._v("파파고 한국어 번역 제안")])]),r("div",{staticClass:"form-group"},[r("label",[e._v("한국어 번역 입력: ")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.textKo,expression:"textKo"}],domProps:{value:e.textKo},on:{input:function(t){t.target.composing||(e.textKo=t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",[e._v("소문 번호: ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.topicNum,expression:"topicNum"}],attrs:{type:"number",min:"1"},domProps:{value:e.topicNum},on:{input:function(t){t.target.composing||(e.topicNum=t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",[e._v("오디오 파일 업로드: ")]),r("input",{attrs:{type:"file"},on:{change:e.handleFile}})]),r("div",{staticClass:"form-group"},[r("label",[e._v("임시 비밀번호 입력: ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.tempHash,expression:"tempHash"}],attrs:{type:"password"},domProps:{value:e.tempHash},on:{input:function(t){t.target.composing||(e.tempHash=t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("button",{on:{click:e.sendData}},[e._v("전송")])])]),e._m(0)])},de=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"convert-instruction"},[r("h4",[e._v("오디오 파일 변환방법")]),r("p",[e._v("1. Shell Script 작성")]),r("pre",[r("code",[e._v('#!/bin/bash\n        say -v Kyoko -o [파일이름].aiff "[일본어 원문]"')])]),r("p",[e._v("2. AIFF 파일을 mp3로 변환 (MediaHuman Converter)")])])}],pe={data:function(){return{idols:[],selectedIdol:1,textJa:"",textKo:"",topicNum:0,tempHash:"",ttsFileBase64:null}},created:function(){this.getIdol()},methods:{getIdol:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/idol/simple");case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.next=8,n;case 8:e.idols=t.sent;case 9:case"end":return t.stop()}}),t)})))()},translate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.textJa,n=e.textKo,console.log(r,n),alert("준비중");case 4:case"end":return t.stop()}}),t)})))()},handleFile:function(e){var t=this;console.log(e.target.files);var r=e.target.files;if(r.length>0){var n=e.target.files[0];if("audio/mpeg"!=n.type||n.size>3e5)return alert("파일이 mp3가 아니거나 사이즈가 너무 큽니다."),e.target.value="",!1;var a=new FileReader;a.addEventListener("load",(function(){var e=a.result.indexOf(",")+1,r=a.result.substring(e,a.result.length);console.log(r.length),t.ttsFileBase64=r}),!1),a.readAsDataURL(n)}},sendData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.selectedIdol||!e.textKo||!e.textJa||!e.tempHash||e.ttsFileBase64,e.topicNum){t.next=3;break}return alert("빈 칸이 있습니다."),t.abrupt("return",!1);case 3:return r={idolId:e.selectedIdol,uwasaJa:e.textJa,uwasaKo:e.textKo,ttsAudioBase64:e.ttsFileBase64,tempHash:e.tempHash,topicNum:e.topicNum},console.log(r),n={"Content-Type":"application/json"},null!=e.$store.state.accessUser&&e.$store.state.accessUser.token&&(n["Authorization"]="Bearer ".concat(e.$store.state.accessUser.token)),t.next=9,fetch("/api/idol/uwasa",{method:"POST",headers:n,body:JSON.stringify(r)});case 9:return a=t.sent,t.next=12,a.json();case 12:o=t.sent,-9999==o.uwasaId?alert("비밀번호가 틀립니다."):(alert("데이터가 입력되었습니다.\n"+JSON.stringify(o)),e.selectedIdol=1,e.textJa="",e.textKo="",e.topicNum=0,e.tempHash="",e.ttsFileBase64=null);case 14:case"end":return t.stop()}}),t)})))()}}},he=pe,me=(r("64f8"),Object(h["a"])(he,ue,de,!1,null,"1eb78cea",null)),fe=me.exports,ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"form-group form-puchi"},[e.idol.id?r("ProfilePuchi",{attrs:{idol:e.idol,customImage:e.customPuchi}}):e._e(),r("label",{attrs:{for:"file-puchi"}},[e._v("푸치 사진 변경")]),r("input",{attrs:{id:"file-puchi",type:"file"},on:{change:e.handlePuchi}}),r("hr"),e.idol.id?r("ProfileIcon",{attrs:{idol:e.idol,customImage:e.customIcon}}):e._e(),r("label",{attrs:{for:"file-icon"}},[e._v("아이콘 변경")]),r("input",{attrs:{id:"file-icon",type:"file"},on:{change:e.handleIcon}}),r("hr"),r("p",[e.idol.id>1?r("button",{on:{click:function(t){return e.moveIdol(e.idol.id-1)}}},[e._v("이전 아이돌")]):e._e(),r("button",{on:{click:function(t){return e.moveIdol(e.idol.id+1)}}},[e._v("다음 아이돌")])])],1),r("table",{attrs:{id:"vertical-table"}},[r("thead"),r("tbody",[r("tr",[r("th",{attrs:{scope:"col",rowspan:"4"}},[e._v("이름")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.nameKo,expression:"idol.nameKo"}],attrs:{type:"text",placeholder:"한글 이름"},domProps:{value:e.idol.nameKo},on:{input:function(t){t.target.composing||e.$set(e.idol,"nameKo",t.target.value)}}})])]),r("tr",[r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.nameEn,expression:"idol.nameEn"}],attrs:{type:"text",placeholder:"영문 이름"},domProps:{value:e.idol.nameEn},on:{input:function(t){t.target.composing||e.$set(e.idol,"nameEn",t.target.value)}}})])]),r("tr",[r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.name,expression:"idol.name"}],attrs:{type:"text",placeholder:"원문(한자) 이름"},domProps:{value:e.idol.name},on:{input:function(t){t.target.composing||e.$set(e.idol,"name",t.target.value)}}})])]),r("tr",[r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.nameFurigana,expression:"idol.nameFurigana"}],attrs:{type:"text",placeholder:"후리가나"},domProps:{value:e.idol.nameFurigana},on:{input:function(t){t.target.composing||e.$set(e.idol,"nameFurigana",t.target.value)}}})])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("나이")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.age,expression:"idol.age"}],attrs:{type:"number"},domProps:{value:e.idol.age},on:{input:function(t){t.target.composing||e.$set(e.idol,"age",t.target.value)}}})])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("출생지")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.birthPlace,expression:"idol.birthPlace"}],attrs:{type:"text"},domProps:{value:e.idol.birthPlace},on:{input:function(t){t.target.composing||e.$set(e.idol,"birthPlace",t.target.value)}}})])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("혈액형")]),r("td",[e.insertInfo?r("select",{directives:[{name:"model",rawName:"v-model",value:e.idol.bloodType,expression:"idol.bloodType"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.idol,"bloodType",t.target.multiple?r:r[0])}}},[r("option",{attrs:{disabled:"",selected:"",value:"null"}},[e._v("혈액형을 선택하세요.")]),e._l(e.insertInfo.BloodType,(function(t){return r("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2):e._e()])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("키")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.height,expression:"idol.height"}],attrs:{type:"number"},domProps:{value:e.idol.height},on:{input:function(t){t.target.composing||e.$set(e.idol,"height",t.target.value)}}})])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("몸무게")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.weight,expression:"idol.weight"}],attrs:{type:"number"},domProps:{value:e.idol.weight},on:{input:function(t){t.target.composing||e.$set(e.idol,"weight",t.target.value)}}})])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("생일")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.birthday,expression:"idol.birthday"}],attrs:{type:"date"},domProps:{value:e.idol.birthday},on:{input:function(t){t.target.composing||e.$set(e.idol,"birthday",t.target.value)}}})])]),r("tr",[r("th",{attrs:{scope:"col",rowspan:"3"}},[e._v("3사이즈")]),r("td",[e._v("B "),e.idol.threeSize?r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.threeSize.bust,expression:"idol.threeSize.bust"}],attrs:{type:"number"},domProps:{value:e.idol.threeSize.bust},on:{input:function(t){t.target.composing||e.$set(e.idol.threeSize,"bust",t.target.value)}}}):e._e()])]),r("tr",[r("td",[e._v("W "),e.idol.threeSize?r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.threeSize.hip,expression:"idol.threeSize.hip"}],attrs:{type:"number"},domProps:{value:e.idol.threeSize.hip},on:{input:function(t){t.target.composing||e.$set(e.idol.threeSize,"hip",t.target.value)}}}):e._e()])]),r("tr",[r("td",[e._v("H "),e.idol.threeSize?r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.threeSize.waist,expression:"idol.threeSize.waist"}],attrs:{type:"number"},domProps:{value:e.idol.threeSize.waist},on:{input:function(t){t.target.composing||e.$set(e.idol.threeSize,"waist",t.target.value)}}}):e._e()])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("별자리")]),e.insertInfo?r("select",{directives:[{name:"model",rawName:"v-model",value:e.idol.constellation,expression:"idol.constellation"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.idol,"constellation",t.target.multiple?r:r[0])}}},[r("option",{attrs:{disabled:"",value:"null"}},[e._v("별자리를 선택하세요.")]),e._l(e.insertInfo.Constellation,(function(t){return r("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2):e._e()]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("취미")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.hobby,expression:"idol.hobby"}],attrs:{type:"text"},domProps:{value:e.idol.hobby},on:{input:function(t){t.target.composing||e.$set(e.idol,"hobby",t.target.value)}}})])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("아이돌 타입")]),r("td",[e.insertInfo?r("select",{directives:[{name:"model",rawName:"v-model",value:e.idol.idolType,expression:"idol.idolType"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.idol,"idolType",t.target.multiple?r:r[0])}}},[r("option",{attrs:{disabled:"",value:"null"}},[e._v("아이돌 타입을 선택하세요.")]),e._l(e.insertInfo.IdolType,(function(t){return r("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2):e._e()])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("자주 쓰는 손")]),r("td",[e.insertInfo?r("select",{directives:[{name:"model",rawName:"v-model",value:e.idol.handedness,expression:"idol.handedness"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.idol,"handedness",t.target.multiple?r:r[0])}}},[r("option",{attrs:{disabled:"",value:"null"}},[e._v("자주 쓰는 손(handedness)을 선택하세요.")]),e._l(e.insertInfo.Handedness,(function(t){return r("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2):e._e()])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("성우")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.voiceActorKo,expression:"idol.voiceActorKo"}],attrs:{type:"text"},domProps:{value:e.idol.voiceActorKo},on:{input:function(t){t.target.composing||e.$set(e.idol,"voiceActorKo",t.target.value)}}})])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("이미지 컬러")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.imageColor,expression:"idol.imageColor"}],attrs:{type:"color"},domProps:{value:e.idol.imageColor},on:{input:function(t){t.target.composing||e.$set(e.idol,"imageColor",t.target.value)}}})])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("나무위키 키워드(선택)")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.idol.refKeyword,expression:"idol.refKeyword"}],attrs:{type:"text"},domProps:{value:e.idol.refKeyword},on:{input:function(t){t.target.composing||e.$set(e.idol,"refKeyword",t.target.value)}}})])])]),r("tfoot",[r("tr",[r("td",{attrs:{colspan:"2"}},[r("button",{staticClass:"btn-send",on:{click:e.sendData}},[e._v("전송")])])])])])])},ge=[],_e=(r("baa5"),{data:function(){return{idol:{},puchiBase64:null,iconBase64:null,customPuchi:null,customIcon:null,insertInfo:null,tempDate:{m:0,d:0}}},components:{ProfilePuchi:B,ProfileIcon:oe},created:function(){console.log("routed ",this.$route),this.getIdolById(this.$route.params.id),this.getEnumInfo()},methods:{getEnumInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/idol/insert-info");case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.next=8,n;case 8:e.insertInfo=t.sent;case 9:case"end":return t.stop()}}),t)})))()},moveIdol:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.getIdolById(e);case 2:n=r.sent,0!=n&&t.changeUrl(n);case 4:case"end":return r.stop()}}),r)})))()},changeUrl:function(e){var t=window.location.href;history.pushState({},null,t.substr(0,t.lastIndexOf("/")+1)+e)},getIdolById:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("/api/idol/profile/"+e);case 3:return n=r.sent,r.next=6,n.json();case 6:if(a=r.sent,200!=n.status){r.next=14;break}return r.next=10,a;case 10:return t.idol=r.sent,r.abrupt("return",t.idol.id);case 14:return alert("해당 아이디의 아이돌이 없습니다."),t.getIdolById(1),r.abrupt("return",0);case 17:r.next=22;break;case 19:r.prev=19,r.t0=r["catch"](0),console.log(r.t0);case 22:case"end":return r.stop()}}),r,null,[[0,19]])})))()},handlePuchi:function(e){var t=this,r="image/png",n=e.target.files;if(n.length>0){var a=e.target.files[0];if(this.customPuchi=a,a.type!=r||a.size>3e5)return alert("파일이 png가 아니거나 사이즈가 너무 큽니다."),e.target.value="",this.customPuchi="",!1;var o=new FileReader;o.addEventListener("load",(function(){var e=o.result.indexOf(",")+1,r=o.result.substring(e,o.result.length);console.log(r.length),t.puchiBase64=r}),!1),o.readAsDataURL(a)}},handleIcon:function(e){var t=this,r="image/jpeg",n=e.target.files;if(n.length>0){var a=e.target.files[0];if(this.customIcon=a,a.type!=r||a.size>3e5)return alert("파일이 png가 아니거나 사이즈가 너무 큽니다."),e.target.value="",this.customIcon="",!1;var o=new FileReader;o.addEventListener("load",(function(){var e=o.result.indexOf(",")+1,r=o.result.substring(e,o.result.length);console.log(r.length),t.iconBase64=r}),!1),o.readAsDataURL(a)}},sendData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.idol,r.puchiBase64=e.puchiBase64||"",r.iconBase64=e.iconBase64||"",n={"Content-Type":"application/json"},null!=e.$store.state.accessUser&&e.$store.state.accessUser.token&&(n["Authorization"]="Bearer ".concat(e.$store.state.accessUser.token)),t.next=7,fetch("/api/idol/profile/".concat(e.idol.id),{method:"PUT",headers:n,body:JSON.stringify(r)});case 7:return a=t.sent,t.next=10,a.json();case 10:o=t.sent,"OK"==o.result?alert("정보 수정이 완료되었습니다."):401==o.status?alert("접근권한이 없습니다. 로그인하세요."):alert("오류가 발생했습니다. \n"+JSON.stringify(o));case 12:case"end":return t.stop()}}),t)})))()},paddingZero:function(e){return e.length<2?"0"+e:e}}}),we=_e,be=(r("4fe6"),Object(h["a"])(we,ve,ge,!1,null,"6b32c820",null)),ye=be.exports,xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"form-group form-puchi"},[e.idol.id?r("ProfilePuchi",{attrs:{idol:e.idol,customImage:e.customImage}}):e._e(),r("p",[e.idol.id>1?r("button",{on:{click:function(t){return e.moveIdol(e.idol.id-1)}}},[e._v("이전 아이돌")]):e._e(),r("button",{on:{click:function(t){return e.moveIdol(e.idol.id+1)}}},[e._v("다음 아이돌")])])],1),r("table",{attrs:{id:"vertical-table"}},[r("thead"),r("tbody",[r("tr",[r("th",{attrs:{scope:"col",rowspan:"4"}},[e._v("이름")]),r("td",[e._v(e._s(e.idol.nameKo))])]),r("tr",[r("td",[e._v(e._s(e.idol.nameEn))])]),r("tr",[r("td",[e._v(e._s(e.idol.name))])]),r("tr",[r("td",[e._v(e._s(e.idol.nameFurigana))])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("나이")]),r("td",[e._v(e._s(e.idol.age?e.idol.age+"세":""))])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("출생지")]),r("td",[e._v(e._s(e.idol.birthPlace))])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("혈액형")]),r("td",[e._v(" "+e._s(e.idol.bloodType)+" ")])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("키")]),r("td",[r("span",[e._v(e._s(e.idol.height))]),e._v(" cm")])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("몸무게")]),r("td",[r("span",[e._v(e._s(e.idol.weight))]),e._v(" kg")])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("생일")]),r("td",[e._v(e._s(e.getFormattedDate))])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("3사이즈")]),r("td",[e._v(e._s(e.getThreeSize))])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("별자리")]),r("td",[e._v(e._s(e.idol.constellation))])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("취미")]),r("td",[e._v(e._s(e.idol.hobby))])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("아이돌 타입")]),r("td",[e._v(e._s(e.idol.idolType))])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("자주 쓰는 손")]),r("td",[e._v(e._s(e.idol.handedness))])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("성우")]),r("td",[e._v(e._s(e.idol.voiceActorKo))])]),r("tr",[r("th",{attrs:{scope:"col"}},[e._v("이미지 컬러")]),r("td",{staticClass:"image-color",style:{background:e.getImageColor,color:e.getTextColorOfImageColor}},[e._v(e._s(e.idol.imageColor))])])])])])},Ie=[],ke=(r("2ca0"),{data:function(){return{idol:{},puchiBase64:null,customImage:null,insertInfo:null}},components:{ProfilePuchi:B},created:function(){this.getIdolById(this.$route.params.id),this.getEnumInfo()},computed:{getFormattedDate:function(){if(this.idol.birthday){var e=this.idol.birthday.split("-"),t=e[1].startsWith(0)?e[1].substr(1,1):e[1],r=e[2].startsWith(0)?e[2].substr(1,1):e[2];return"".concat(t,"월 ").concat(r,"일")}return""},getThreeSize:function(){return this.idol.threeSize&&0!=this.idol.threeSize.bust?this.idol.threeSize.bust+"-"+this.idol.threeSize.hip+"-"+this.idol.threeSize.waist:"-"},getImageColor:function(){return this.idol.imageColor||""},getTextColorOfImageColor:function(){if(!this.idol.imageColor)return"";var e=this.idol.imageColor.substring(1),t=parseInt(e,16),r=t>>16&255,n=t>>8&255,a=t>>0&255,o=.2126*r+.7152*n+.0722*a;return o<127.5?"white":"black"}},methods:{getEnumInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/idol/insert-info");case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.next=8,n;case 8:e.insertInfo=t.sent;case 9:case"end":return t.stop()}}),t)})))()},moveIdol:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.getIdolById(e);case 2:n=r.sent,0!=n&&t.changeUrl(n);case 4:case"end":return r.stop()}}),r)})))()},changeUrl:function(e){var t=window.location.href;history.pushState({},null,t.substr(0,t.lastIndexOf("/")+1)+e)},getIdolById:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("/api/idol/profile/"+e);case 3:return n=r.sent,r.next=6,n.json();case 6:if(a=r.sent,200!=n.status){r.next=14;break}return r.next=10,a;case 10:return t.idol=r.sent,r.abrupt("return",t.idol.id);case 14:return alert("해당 아이디의 아이돌이 없습니다."),t.getIdolById(1),r.abrupt("return",0);case 17:r.next=22;break;case 19:r.prev=19,r.t0=r["catch"](0),console.log(r.t0);case 22:case"end":return r.stop()}}),r,null,[[0,19]])})))()}}}),Ce=ke,Oe=(r("6e89"),Object(h["a"])(Ce,xe,Ie,!1,null,"f6285856",null)),$e=Oe.exports,Pe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ue=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("로그인 되었습니다.")])])}],Te={created:function(){var e=window.location.href,t=this.getUrlParameter("token",e),r=this.getUrlParameter("error",e);t?(localStorage.setItem("accessToken",t),this.$store.dispatch("LOGIN",t).then((function(){}))):r&&alert(r)},props:["accessToken"],data:function(){return{}},methods:{getUrlParameter:function(e,t){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=r.exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},redirect:function(){}}},Se=Te,Ne=Object(h["a"])(Se,Pe,Ue,!1,null,"464a3b62",null),je=Ne.exports,Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"thread-wrapper"},[r("WriteArea",{attrs:{threadName:this.$route.params.threadName},on:{refreshThread:e.refresh}}),0!=e.threadList.length?r("div",e._l(e.lineCarriagedThreadList,(function(t){return r("div",{key:t.id,staticClass:"each-thread-wrapper"},[r("table",[r("tbody",[r("tr",[r("td",[r("span",[e._v(e._s("No."+t.id))])]),r("td",[r("img",{staticClass:"profile-img",attrs:{src:t.author.imageUrl||""}})]),r("td",[r("span",[e._v(e._s(t.author.name))])]),t.modifiedDate?r("td",[r("span",[e._v(e._s(t.modifiedDate.split("T")[0]+" "+t.modifiedDate.split("T")[1].split(".")[0]))])]):e._e(),e.getLoggedIn&&e.isCorrectWriter(t.author.id)?r("td",[r("span",{staticStyle:{cursor:"pointer",color:"lightcoral"},on:{click:function(r){return e.deleteThread(t.id)}}},[e._v("[삭제]")])]):e._e()])])]),r("hr"),r("div",{staticClass:"content",domProps:{innerHTML:e._s(t.content)}})])})),0):e._e(),r("infinite-loading",{attrs:{identifier:e.infiniteId,spinner:"waveDots"},on:{infinite:e.infiniteHandler}})],1)},Le=[],Ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.getLoggedIn?r("div",{staticClass:"write-area"},[e._m(0),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.writtenContent,expression:"writtenContent"}],attrs:{rows:"5"},domProps:{value:e.writtenContent},on:{input:function(t){t.target.composing||(e.writtenContent=t.target.value)}}}),r("button",{on:{click:e.sendOneThread}},[e._v("등록")])]):e._e()},De=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",[r("strong",[e._v("글쓰기")])])}],Ee={data:function(){return{writtenContent:""}},props:["threadName"],computed:{getLoggedIn:function(){return this.isLoggedIn()}},methods:{isLoggedIn:function(){return this.$store.state.accessUser&&""!=this.$store.state.accessUser.token},sendOneThread:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isLoggedIn){t.next=3;break}return alert("회원만 작성할 수 있습니다."),t.abrupt("return",!1);case 3:return r={authorId:e.$store.state.accessUser.data.id,category:"",content:e.writtenContent,threadName:e.$route.params.threadName},n={"Content-Type":"application/json",Authorization:"Bearer ".concat(e.$store.state.accessUser.token)},t.next=7,fetch("/api/thread",{method:"POST",headers:n,body:JSON.stringify(r)});case 7:return a=t.sent,t.next=10,a.json();case 10:o=t.sent,201==o.status?(alert("글이 정상적으로 등록되었습니다."),e.$emit("refreshThread"),e.writtenContent=""):alert("오류가 발생했습니다.\n"+JSON.stringify(o));case 12:case"end":return t.stop()}}),t)})))()}}},Ae=Ee,ze=(r("382f"),Object(h["a"])(Ae,Ke,De,!1,null,"5958b29c",null)),Be=ze.exports,Je={data:function(){return{threadList:[],requestCount:0,infiniteId:+new Date}},components:{InfiniteLoading:U.a,WriteArea:Be},created:function(){},computed:{getLoggedIn:function(){return this.isLoggedIn()},lineCarriagedThreadList:function(){var e=this.threadList;return e.map((function(e){return e.content=e.content.replace(/(?:\\r\\n|\\r|\\n|\r\n|\r|\n)/g,"<br>"),e}))}},methods:{isCorrectWriter:function(e){return this.$store.state.accessUser.data.id==e},isLoggedIn:function(){return this.$store.state.accessUser&&""!=this.$store.state.accessUser.token},getThreads:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/thread/".concat(e));case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))()},refresh:function(){this.threadList=[],this.requestCount=0,this.infiniteId+=1},deleteThread:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.isLoggedIn){r.next=3;break}return alert("회원만 삭제할 수 있습니다."),r.abrupt("return",!1);case 3:if(confirm("정말 삭제하시겠습니까?")){r.next=5;break}return r.abrupt("return",!1);case 5:return n={"Content-Type":"application/json",Authorization:"Bearer ".concat(t.$store.state.accessUser.token)},r.next=8,fetch("/api/thread/".concat(e),{method:"DELETE",headers:n});case 8:return a=r.sent,r.next=11,a.json();case 11:o=r.sent,o.status?alert("오류가 발생했습니다.\n"+JSON.stringify(o)):-99==o?alert("게시물이 없습니다."):alert("삭제되었습니다."),t.threadList=[],t.requestCount=0,t.infiniteId+=1;case 16:case"end":return r.stop()}}),r)})))()},infiniteHandler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!=t.requestCount){r.next=5;break}e.loaded(),t.requestCount+=1,r.next=9;break;case 5:return r.next=7,t.getThreads(t.$route.params.threadName);case 7:n=r.sent,setTimeout((function(){n.length&&(t.threadList=n),e.complete()}),500);case 9:case"end":return r.stop()}}),r)})))()}}},He=Je,Fe=(r("2845"),Object(h["a"])(He,Re,Le,!1,null,"28f41916",null)),qe=Fe.exports;n["a"].use(k["a"]),n["a"].use(C["a"]);var Me=new k["a"]({mode:"history",routes:[{path:"/",name:"Topic",component:q,alias:["/v/search"]},{path:"/foo",name:"Foo",component:Q},{path:"/bar",name:"Bar",component:Q},{path:"/v/simple-list",name:"Idol Simple List",component:le},{path:"/v/write-uwasa",name:"Write Uwasa",component:fe},{path:"/v/idol/update/:id",name:"Update Idol",component:ye},{path:"/v/idol/view/:id",name:"View Idol",component:$e},{path:"/v/auth-redirect",name:"Login Redirection Handler",component:je},{path:"/v/thread/:threadName",name:"View Thread List",component:qe}]}),Ge=r("2f62");n["a"].use(Ge["a"]);var We=new Ge["a"].Store({state:{accessUser:null},getters:{},mutations:{LOGIN:function(e,t){e.accessUser=t},LOGOUT:function(e){e.accessUser=null}},actions:{LOGIN:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=fetch("/api/user/me",{headers:{Authorization:"Bearer "+t}}),r.next=4,a;case 4:return o=r.sent,r.next=7,o.json();case 7:if(i=r.sent,200!=o.status){r.next=15;break}return r.t0=console,r.next=12,i;case 12:r.t1=r.sent,r.t0.log.call(r.t0,"userData, data",r.t1),n("LOGIN",{token:t,data:i});case 15:case"end":return r.stop()}}),r)})))()},LOGOUT:function(e){var t=e.commit;t("LOGOUT")}}});n["a"].config.productionTip=!1,new n["a"]({router:Me,store:We,render:function(e){return e(I)}}).$mount("#app")},"64a0":function(e,t,r){},"64f8":function(e,t,r){"use strict";var n=r("f8f2"),a=r.n(n);a.a},"6e89":function(e,t,r){"use strict";var n=r("1e82"),a=r.n(n);a.a},"6fff":function(e,t,r){"use strict";var n=r("cc4a"),a=r.n(n);a.a},"77b3":function(e,t,r){"use strict";var n=r("adbc"),a=r.n(n);a.a},"85ec":function(e,t,r){},a93a:function(e,t,r){},abdd:function(e,t,r){"use strict";var n=r("64a0"),a=r.n(n);a.a},adbc:function(e,t,r){},b388:function(e,t,r){},cb56:function(e,t,r){},cc4a:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.3ef3e78a.png"},d0f6:function(e,t,r){},d753:function(e,t,r){},f8f2:function(e,t,r){}});
//# sourceMappingURL=app.54689f31.js.map